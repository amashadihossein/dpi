<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dpi">
<title>dpi • dpi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dpi">
<meta property="og:description" content="dpi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dpi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/dpi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/amashadihossein/dpi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>dpi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/amashadihossein/dpi/blob/HEAD/vignettes/dpi.Rmd" class="external-link"><code>vignettes/dpi.Rmd</code></a></small>
      <div class="d-none name"><code>dpi.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dpi</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>This package aims to provide a minimalist and uniform interface for
retrieving data products and the associated metadata no matter where the
data product is housed. Currently, s3, local, and LabKey are three types
of remote repositories for housing data products. Note: LabKey
functionality has been temporarily deprecated.</p>
<p>This packages leverages the <code>pins</code> package for accessing
data. As such, it leverage the concept of <code>boards</code> for
organizing data into <strong>data spaces</strong>. As an example, a team
working on multiple clinical studies, may consider defining a data space
or <code>board</code> for each study, each of which defined by a
governance policy. In this example, a <code>board</code> is not
dissimilar to the idea of a directory or folder. A board can be
instantiated on different data platforms (e.g. AWS s3) supported by
<code>pins</code> or its extensions.</p>
<p>As different data platforms (e.g. s3 vs. LabKey) have their own
specific url and ways of authentication, different parameters need to be
set up for how connection to the remote data repository is to be
established. Once the connection is established, however, all other
interactions (e.g. list, get, version, etc.) are done using the same set
of functions. With that in mind, the steps outlined below are divided
into</p>
<ol style="list-style-type: decimal">
<li>Setting up the connection</li>
<li>Interacting with the data product</li>
</ol>
</div>
<div class="section level2">
<h2 id="set-up-connection">Set up connection<a class="anchor" aria-label="anchor" href="#set-up-connection"></a>
</h2>
<p>Setting up connection to data products involves setting</p>
<ol style="list-style-type: decimal">
<li>Board parameters: parameters relating to the remote location of the
data product</li>
<li>Credential parameters: parameters checked by the remote location of
the data when trying to access</li>
</ol>
<p><strong>NOTE:</strong> prior to proceeding further verify that you
have working credentials for the repository you need to access.</p>
<div class="section level3">
<h3 id="board-parameters">Board parameters<a class="anchor" aria-label="anchor" href="#board-parameters"></a>
</h3>
<ul>
<li>For s3, you need to know the bucket name and the region.</li>
<li>For LabKey, you need to know the url of platform and specific
folder.</li>
<li>For local boards, you only need to provide the path of the local
folder</li>
</ul>
</div>
<div class="section level3">
<h3 id="format-board-parameters">Format board parameters<a class="anchor" aria-label="anchor" href="#format-board-parameters"></a>
</h3>
<p>For S3, you need to provide the s3 bucket name and region</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">board_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/board_params_set_s3.html">board_params_set_s3</a></span><span class="op">(</span></span>
<span>  bucket_name <span class="op">=</span> <span class="st">"bucket_name"</span>,</span>
<span>  region <span class="op">=</span> <span class="st">"us-east-1"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>For local, you need to provide the absolute folder path</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">board_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/board_params_set_local.html">board_params_set_local</a></span><span class="op">(</span></span>
<span>  folder <span class="op">=</span> <span class="st">"/project_folder/subfolder"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="format-your-credentials">Format your credentials<a class="anchor" aria-label="anchor" href="#format-your-credentials"></a>
</h3>
<p>This can be done with <code>cred_set_aws</code> or
<code>cred_set_labkey</code> functions. The cred_set function signatures
informs you of the type of parameters needed.</p>
<p><strong>NOTE:</strong> For security reasons, avoid putting your
credentials inside your script. It is highly recommended to establish a
habit of using environment variables in conjunction with secret
management packages like <code>keyring</code>. Below, exemplifies this
pattern, where the env variables are set using
<code>Sys.setenv("AWS_KEY" = "xxxx")</code> in console, or using
<code>keyring</code>,
<code>Sys.setenv("AWS_KEY" = keyring::key_get(service = "AWS_KEY")</code>.
Similarly, “AWS_SECRET” can be set as an environment variable.</p>
<p>The signature for creds for AWS s3 is takes two parameters.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aws_creds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/creds_set_aws.html">creds_set_aws</a></span><span class="op">(</span></span>
<span>  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"AWS_KEY"</span><span class="op">)</span>,</span>
<span>  secret <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"AWS_SECRET"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="connect-and-interact-with-data-product">Connect and interact with data product<a class="anchor" aria-label="anchor" href="#connect-and-interact-with-data-product"></a>
</h2>
<p>With the connection parameters established, interaction with the data
product use the same set of function and format no matter where the data
is housed.</p>
<div class="section level3">
<h3 id="connect-to-the-board">Connect to the board<a class="anchor" aria-label="anchor" href="#connect-to-the-board"></a>
</h3>
<p>Then we can connect to the board.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">board_object</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dp_connect.html">dp_connect</a></span><span class="op">(</span>board_params <span class="op">=</span> <span class="va">board_params</span>, creds <span class="op">=</span> <span class="va">aws_creds</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="work-with-the-board">Work with the board<a class="anchor" aria-label="anchor" href="#work-with-the-board"></a>
</h3>
<p>List what data products available on this board we just connected to.
Note we need to pass the board object in order to list available data
products.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dp_list.html">dp_list</a></span><span class="op">(</span>board_object <span class="op">=</span> <span class="va">board_object</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieve-data">Retrieve data<a class="anchor" aria-label="anchor" href="#retrieve-data"></a>
</h3>
<p>Load data into the working environment, e.g. as object
<code>dp</code>. Specifying version is optional.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dp_get.html">dp_get</a></span><span class="op">(</span></span>
<span>  board_object <span class="op">=</span> <span class="va">board_object</span>,</span>
<span>  data_name <span class="op">=</span> <span class="st">"dp-studyid_branchid"</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"c5a51c3"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Afshin Mashadi-Hossein, Yue Jiang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
